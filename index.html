<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ølendle</title>
  <style>
    body {
      margin: 0;
      background: url('your-background.jpg') no-repeat center center fixed;
      background-size: cover;
      font-family: sans-serif;
      color: white;
    }

    .container {
      padding: 20px;
      max-width: 800px;
      margin: auto;
    }

    .game-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .mode-label {
      font-size: 28px;
      font-weight: bold;
    }

    .sub-label {
      font-size: 20px;
      color: lime;
    }

    .mode-toggle {
      background: purple;
      color: white;
      border: none;
      padding: 8px 12px;
      cursor: pointer;
      font-weight: bold;
    }

    .reset-btn {
      background: yellow;
      color: black;
      border: none;
      padding: 6px 10px;
      cursor: pointer;
      font-weight: bold;
    }

    .input-group {
      display: flex;
      margin-top: 20px;
    }

    #guessInput {
      flex: 1;
      padding: 10px;
      font-size: 16px;
    }

    #guessBtn {
      padding: 10px;
      font-size: 16px;
      background: #00cc00;
      border: none;
      color: white;
      cursor: pointer;
    }

    .hint-box {
      margin-top: 10px;
      padding: 10px;
      background: rgba(255, 255, 255, 0.7);
      color: black;
      font-weight: bold;
      text-align: center;
      cursor: pointer;
    }

    .hint-box.locked {
      pointer-events: none;
      opacity: 0.8;
    }

    .rows {
      margin-top: 20px;
    }

    .row {
      display: grid;
      grid-template-columns: 80px 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
      background: rgba(255, 255, 255, 0.1);
      margin-bottom: 8px;
      padding: 10px;
      border-radius: 8px;
    }

    .cell {
      padding: 6px;
      text-align: center;
      background: rgba(255, 255, 255, 0.1);
    }

    .correct {
      background: rgba(0, 255, 0, 0.5) !important;
    }

    .incorrect {
      background: rgba(255, 0, 0, 0.5) !important;
    }

    .autocomplete {
      position: absolute;
      background: white;
      color: black;
      z-index: 999;
      max-height: 150px;
      overflow-y: auto;
      width: 100%;
    }

    .autocomplete div {
      padding: 8px;
      cursor: pointer;
    }

    .autocomplete div:hover {
      background: #ddd;
    }
  </style>
</head>
<body>

  <div class="container">
    <div class="game-header">
      <div>
        <div class="mode-label">Ølendle</div>
        <div class="sub-label" id="subLabel">Daily</div>
      </div>
      <button id="resetBtn" class="reset-btn" style="display: none;">Reset</button>
      <button id="toggleBtn" class="mode-toggle">Freeplay</button>
    </div>

    <div class="input-group">
      <input type="text" id="guessInput" placeholder="Enter a name..." />
      <button id="guessBtn">Guess</button>
    </div>

    <div id="autocomplete" class="autocomplete" style="display:none;"></div>

    <div id="hintBox" class="hint-box">Residence hint in 5 guesses</div>

    <div class="rows" id="rows"></div>
  </div>

  <script>
    const guessInput = document.getElementById('guessInput');
    const guessBtn = document.getElementById('guessBtn');
    const rowsDiv = document.getElementById('rows');
    const hintBox = document.getElementById('hintBox');
    const toggleBtn = document.getElementById('toggleBtn');
    const resetBtn = document.getElementById('resetBtn');
    const subLabel = document.getElementById('subLabel');
    const autocomplete = document.getElementById('autocomplete');

    let mode = localStorage.getItem('mode') || 'daily';
    let guesses = JSON.parse(localStorage.getItem(`guesses_${mode}`) || '[]');
    let hintUsed = localStorage.getItem(`hintUsed_${mode}`) === 'true';
    let hintUnlocked = localStorage.getItem(`hintUnlocked_${mode}`) === 'true';
    const MAX_GUESSES = 5;
    const secret = { name: 'Testperson', residence: 'Bergen' }; // placeholder

    function saveGuesses() {
      localStorage.setItem(`guesses_${mode}`, JSON.stringify(guesses));
    }

    function switchMode() {
      mode = mode === 'daily' ? 'freeplay' : 'daily';
      localStorage.setItem('mode', mode);
      guesses = JSON.parse(localStorage.getItem(`guesses_${mode}`) || '[]');
      hintUsed = localStorage.getItem(`hintUsed_${mode}`) === 'true';
      hintUnlocked = localStorage.getItem(`hintUnlocked_${mode}`) === 'true';
      updateUI();
    }

    function updateUI() {
      subLabel.textContent = mode === 'daily' ? 'Daily' : 'Freeplay';
      toggleBtn.textContent = mode === 'daily' ? 'Freeplay' : 'Daily';
      toggleBtn.style.background = mode === 'daily' ? 'purple' : 'green';
      resetBtn.style.display = mode === 'freeplay' ? 'inline-block' : 'none';
      renderHint();
      renderRows();
    }

    function renderRows() {
      rowsDiv.innerHTML = '';
      guesses.forEach((g, i) => {
        const row = document.createElement('div');
        row.className = 'row';
        row.innerHTML = `
          <div class="cell">${g.name}</div>
          <div class="cell">${g.birth || ''}</div>
          <div class="cell">${g.height || ''}</div>
          <div class="cell">${g.residence || ''}</div>
          <div class="cell">${g.hair || ''}</div>
          <div class="cell">${g.gender || ''}</div>
          <div class="cell">${g.eyes || ''}</div>
          <div class="cell">${g.result || ''}</div>
        `;
        rowsDiv.appendChild(row);
      });
    }

    function renderHint() {
      const count = MAX_GUESSES - guesses.length;
      const hintKey = `hintUnlocked_${mode}`;
      hintUnlocked = localStorage.getItem(hintKey) === 'true';

      if (!hintUnlocked && count <= 0) {
        hintUnlocked = true;
        localStorage.setItem(hintKey, 'true');
      }

      if (hintUnlocked) {
        if (hintUsed) {
          hintBox.textContent = `Residence: ${secret.residence}`;
          hintBox.classList.add('locked');
        } else {
          hintBox.textContent = 'Show Hint';
          hintBox.classList.remove('locked');
          hintBox.style.background = '#fff';
        }
      } else {
        hintBox.textContent = `Residence hint in ${count} guesses`;
        hintBox.classList.remove('locked');
        hintBox.style.background = 'rgba(255,255,255,0.7)';
      }
    }

    hintBox.onclick = () => {
      if (!hintUnlocked || hintUsed) return;
      hintUsed = true;
      localStorage.setItem(`hintUsed_${mode}`, 'true');
      renderHint();
    };

    guessBtn.onclick = () => {
      const name = guessInput.value.trim();
      if (!name) return;
      if (guesses.length >= MAX_GUESSES) return;

      guesses.push({ name });
      saveGuesses();
      renderRows();
      renderHint();
      guessInput.value = '';
    };

    toggleBtn.onclick = switchMode;
    resetBtn.onclick = () => {
      guesses = [];
      hintUsed = false;
      hintUnlocked = false;
      localStorage.removeItem(`guesses_${mode}`);
      localStorage.removeItem(`hintUsed_${mode}`);
      localStorage.removeItem(`hintUnlocked_${mode}`);
      updateUI();
    };

    updateUI();
  </script>
</body>
</html>
