<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ølendle</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background:
        linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)),
        url('background.jpg') center/cover no-repeat;
      color: #fff;
      text-align: center;
    }
    main {
      position: relative;
      max-width: 900px;
      margin: 2rem auto;
      background: rgba(255,255,255,0.1);
      padding: 1rem;
      border-radius: 8px;
    }
    h1 { font-size: 3rem; margin: 0; }
    .byline { font-size: 0.9rem; margin-bottom: 1.5rem; opacity: 0.8; }
    .autocomplete { position: relative; display: inline-block; width: 60%; }
    #guessInput {
      font-size: 1rem;
      padding: 0.5rem;
      width: 100%;
      border: none;
      border-radius: 4px;
      box-sizing: border-box;
    }
    #suggestions {
      position: absolute;
      top: 100%;
      left: 0;
      width: 100%;
      max-height: 200px;
      overflow-y: auto;
      background: rgba(255,255,255,0.9);
      color: #000;
      border-radius: 4px;
      display: none;
      z-index: 10;
      box-sizing: border-box;
    }
    .suggestion {
      display: flex;
      align-items: center;
      padding: 0.25rem;
      cursor: pointer;
    }
    .suggestion:hover { background: #eee; }
    .suggestion img {
      width: 40px; height: 40px; object-fit: cover; border-radius: 50%; margin-right: 0.5rem;
    }
    button {
      font-size: 1rem;
      padding: 0.5rem 1rem;
      margin: 0.5rem;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover { background: rgba(255,255,255,0.2); }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
      background: rgba(255,255,255,0.1);
    }
    th, td {
      border: 1px solid rgba(255,255,255,0.3);
      padding: 0.5rem;
      color: #fff;
      vertical-align: middle;
    }
    th { background: rgba(255,255,255,0.2); }
    .green { background: rgba(136,232,140,0.7); }
    .yellow { background: rgba(254,240,138,0.7); color: #333; }
    .gray  { background: rgba(221,221,221,0.7); color: #333; }
    .arrow { font-weight: bold; }
    img.person-photo {
      width: 60px; height: 60px; object-fit: cover; border-radius: 50%;
    }
  </style>
</head>
<body>
  <main>
    <h1>Ølendle</h1>
    <div class="byline">By Morten</div>

    <div class="autocomplete">
      <input type="text" id="guessInput" placeholder="Type a name…" autocomplete="off" />
      <div id="suggestions"></div>
    </div>
    <button id="guessBtn">Guess</button>

    <table id="board">
      <thead>
        <tr>
          <th>Photo</th>
          <th>Name</th>
          <th>Birth&nbsp;Year</th>
          <th>Height&nbsp;(cm)</th>
          <th>Residence</th>
          <th>Hair&nbsp;Color</th>
          <th>Gender</th>
          <th>Eye&nbsp;Color</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </main>

  <script>
    const placeholder = 'no-image.png';

    const people = [
      { name: 'Morten',       birthYear: 2008, height: 182, residence: 'Ølen',      hairColor: 'Brown', eyeColor: 'Blue',   gender: 'M', imageUrl: 'Morten.jpeg' },
      { name: 'Thomas Andre', birthYear: 2008, height: 190, residence: 'Ølensvåg', hairColor: 'Brown', eyeColor: 'Brown',  gender: 'M', imageUrl: 'Thomas_Andre.jpg' },
      { name: 'Eirik',        birthYear: 2008, height: 175, residence: 'Ølen',      hairColor: 'Blonde',eyeColor: 'Blue',   gender: 'M', imageUrl: 'Eirik.jpg' },
      { name: 'Sasha',        birthYear: 2008, height: 182, residence: 'Haugesund', hairColor: 'Brown', eyeColor: 'Blue',   gender: 'M', imageUrl: 'Sasha.jpg' },
      { name: 'Dan Evan',     birthYear: 2008, height: 0,   residence: 'Ølensvåg', hairColor: 'Black', eyeColor: 'Brown',  gender: 'M', imageUrl: 'Dan_Evan.jpg' },
      { name: 'Endre',        birthYear: 2008, height: 0,   residence: 'Ølen',      hairColor: 'Blonde',eyeColor: 'Blue',   gender: 'M', imageUrl: 'Endre.jpg' },
      { name: 'Gabri',        birthYear: 2007, height: 0,   residence: 'Ølen',  hairColor: 'Blonde', eyeColor: 'Blue',   gender: 'M', imageUrl: 'Gabri.jpg' },
      { name: 'Ridwan',       birthYear: 2007, height: 194,   residence: 'Skjold',  hairColor: 'Black', eyeColor: 'Brown',   gender: 'M', imageUrl: 'Ridwan.jpg' },
    ];

    const MS_PER_DAY = 24 * 60 * 60 * 1000;
    const secret = people[Math.floor(Date.now() / MS_PER_DAY) % people.length];

    const input = document.getElementById('guessInput');
    const btn   = document.getElementById('guessBtn');
    const sugg  = document.getElementById('suggestions');
    const tbody = document.querySelector('#board tbody');

    // Autocomplete suggestions
    input.addEventListener('input', () => {
      const val = input.value.trim().toLowerCase();
      sugg.innerHTML = '';
      if (!val) { sugg.style.display = 'none'; return; }
      const matches = people.filter(p => p.name.toLowerCase().includes(val));
      if (!matches.length) { sugg.style.display = 'none'; return; }
      matches.forEach(p => {
        const div = document.createElement('div');
        div.className = 'suggestion';
        div.innerHTML = `<img src="${p.imageUrl||placeholder}" alt=""><span>${p.name}</span>`;
        div.addEventListener('click', () => {
          input.value = p.name;
          sugg.style.display = 'none';
          input.focus();
        });
        sugg.appendChild(div);
      });
      sugg.style.display = 'block';
    });

    // Hide suggestions on blur (after click)
    input.addEventListener('blur', () => setTimeout(() => sugg.style.display = 'none', 100));

    // Submit guess
    function submitGuess() {
      const name = input.value.trim().toLowerCase();
      const guess = people.find(p => p.name.toLowerCase() === name);
      if (!guess) return; // ignore unknown

      const tr = document.createElement('tr');

      // Photo
      const imgSrc = guess.imageUrl || placeholder;
      tr.appendChild(cell(`<img class="person-photo" src="${imgSrc}" alt="">`, 'gray'));

      // Helpers
      const numCell = (v, s) => {
        if (v === s) return cell(v, 'green');
        if (v === 0) return cell(`Unknown <span class="arrow">↓</span>`, 'yellow');
        const dir = v < s ? '↑' : '↓';
        return cell(`${v} <span class="arrow">${dir}</span>`, 'yellow');
      };
      const catCell = (v, s) => {
        if (v === s) return cell(v, 'green');
        if (v === 'Unknown' || !v) return cell(`Unknown <span class="arrow">↓</span>`, 'yellow');
        return cell(v, 'gray');
      };

      // Build row
      tr.appendChild(cell(guess.name,                     'gray'));
      tr.appendChild(numCell(guess.birthYear, secret.birthYear));
      tr.appendChild(numCell(guess.height,    secret.height));
      tr.appendChild(catCell(guess.residence,  secret.residence));
      tr.appendChild(catCell(guess.hairColor,  secret.hairColor));
      tr.appendChild(catCell(guess.gender,     secret.gender));
      tr.appendChild(catCell(guess.eyeColor,   secret.eyeColor));

      tbody.appendChild(tr);
      input.value = '';
      input.focus();
    }

    btn.addEventListener('click', submitGuess);
    input.addEventListener('keydown', e => {
      if (e.key === 'Enter') submitGuess();
    });

    function cell(html, cls) {
      const td = document.createElement('td');
      td.className = cls;
      td.innerHTML = html;
      return td;
    }
  </script>
</body>
</html>
